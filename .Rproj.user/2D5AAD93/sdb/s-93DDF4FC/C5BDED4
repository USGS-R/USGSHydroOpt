{
    "contents" : "#' getRatios\n#'\n#' Computes ratios from optical data. Assumes that the signal with the greatest \n#' mean is in the numerator making the mean ratio greater than one.\n#'\n#' @param dataSummary dataframe with summary absorbance and fluoresence data. This \n#' @param sigs signals vector of variable names in dataSummary for generating ratios\n#' @param grnum Column name that defines the grnumbers in the dataSummary dataframe.\n#' These names are used to merge ratio data into the summary dataframe. \n#' @return dataSummary dataframe with the additional columns of spectral ratios computed using getRatios\n#' @export\n#' @examples\n#' dataSummary <- dfsummary\n#' sigs <- ratioSignals[which(ratioSignals[2]>0),1]\n#' grnum <- \"GRnumber\"\n#' test <- getRatios(dataSummary,sigs,grnum)\ngetRatios <- function(dataSummary,sigs,grnum){\n  \n  ratios <- data.frame(dataSummary[,grnum])\n  names(ratios) <- grnum\n  for(i in 1:(length(sigs)-1)){\n    varName1 <- sigs[i]\n    for(j in (i+1):length(sigs)){\n      varName2 <- sigs[j]\n      if(mean(dataSummary[,varName1],na.rm=TRUE) > (mean(dataSummary[,varName2],na.rm=TRUE))){\n        ratio <- dataSummary[,varName1]/dataSummary[,varName2]\n        ratioName <- paste(\"r\",varName1,\"_\",varName2,sep=\"\")\n      }else{\n        ratio <- dataSummary[,varName2]/dataSummary[,varName1]\n        ratioName <- paste(\"r\",varName2,\"_\",varName1,sep=\"\")\n      }\n      ratios <- cbind(ratios,ratio)\n      names(ratios)[dim(ratios)[2]] <- ratioName\n    }\n  }\n  \n  dataSummary <- merge(dataSummary,ratios,by=grnum)\n  return(dataSummary)\n  \n}\n    \n    \n    ",
    "created" : 1403704242054.000,
    "dirty" : false,
    "encoding" : "ISO8859-1",
    "folds" : "",
    "hash" : "1377237483",
    "id" : "C5BDED4",
    "lastKnownWriteTime" : 1403038949,
    "path" : "D:/stcData/R_projects/USGSHydroOpt/R/ratiosFxn.R",
    "project_path" : "R/ratiosFxn.R",
    "properties" : {
    },
    "source_on_save" : false,
    "type" : "r_source"
}